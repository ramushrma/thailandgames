import{O as C,y as P,x as B,v as h,t as D,a3 as U,a0 as $,a1 as s,ae as m,V as i,Y as o,T as l,_ as a,b8 as F,R,a4 as N,k as y,P as u}from"./vendor-b2024301.js";import{J as z,v as E,l as M,g as A,aK as G,_ as J}from"./index-fbf0707b.js";const K={class:"verifyInput__container"},L={class:"verifyInput__container-label"},O={class:"verifyInput__container-label__icon"},Y={key:0},j={key:1},q={class:"verifyInput__container-input"},H=["placeholder"],Q={key:0},W={key:1},X={class:"verifyInput__container-tip"},Z=C({__name:"VerifyInput",props:{value:{},typeP:{},isShowVerifyT:{type:Boolean},placeholder:{default:z.global.t("registerTip1")},sendFunc:{},number:{},numberType:{default:""},showVerify:{type:Boolean,default:!0},email:{},loginType:{}},emits:["update:value"],setup(b,{emit:w}){const n=b,{t:p}=P(),r=E(),v=M().getUserInfo,c=B(),_=h({get(){return n.value||""},set(e){w("update:value",e)}}),f=D(!0);async function S(){var t;if(f.value&&(f.value=!1),r.countDown>0)return;if(c.currentRoute.value.name==="rpwd"||c.currentRoute.value.name==="register"||c.currentRoute.value.name==="SettingC-UpdatePhone"&&!n.isShowVerifyT){if(!((t=n.number)!=null&&t.trim()))return y({message:p("telUndetected"),wordBreak:"break-word"});const d=(n.number.trim()+n.numberType.trim()).length;if(d<10||d>14)return y({message:p("wrongTel"),wordBreak:"break-word"})}else if(!localStorage.getItem("numberType")&&localStorage.getItem("number"))return y({message:p("telUndetected"),wordBreak:"break-word"});!n.sendFunc||await n.sendFunc()===-1||r.sendCode()}const V=h(()=>{var e;return n.number?n.numberType+n.number:((e=v==null?void 0:v.verifyMethods)==null?void 0:e.mobile)||localStorage.getItem("numberType")+localStorage.getItem("number")}),k=e=>{const t=e.target;t.value=t.value.replace(/\s+/g,""),t.value=t.value.replace(/[^\d]/g,"")};function I(){c.push({name:"CustomerService"})}return(e,t)=>{const d=U("van-icon"),T=$("lazy");return s((u(),i("div",K,[s(o("div",L,[s(o("img",O,null,512),[[T,l(A)("login","verify")]]),e.typeP==="updatePhone"||e.typeP==="lock"?(u(),i("span",Y,a(e.$t("sendVerifyCodeTo"))+" "+a(l(G)(V.value)),1)):(u(),i("span",j,a(e.$t("verifyCode")),1))],512),[[m,!(e.isShowVerifyT===!1&&e.typeP==="updatePhone")]]),o("div",q,[s(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=g=>_.value=g),placeholder:e.$t("phEnterVerificationCode"),maxlength:"6",onInput:k},null,40,H),[[F,_.value]]),o("button",{onClick:S,class:R({inActive:l(r).countDown>0})},[l(r).countDown===0?(u(),i("span",Q,a(e.$t("send")),1)):(u(),i("span",W,a(l(r).countDown)+"S ",1))],2)]),s(o("div",X,[N(d,{name:"warning-o"}),o("span",null,a(e.$t("codeUnreceived"))+"?",1),o("span",{onClick:t[1]||(t[1]=g=>I())},a(e.$t("contactServicer")),1)],512),[[m,!f.value]])],512)),[[m,e.showVerify]])}}});const ne=J(Z,[["__scopeId","data-v-1f8d0ffd"]]);export{ne as V};

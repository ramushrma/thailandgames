import{O as le,t as a,v as i,B as re,b6 as ie,a3 as ne,Q as ce,a5 as de,ac as ue,P as o,Y as t,a2 as d,V as n,Z as f,a1 as he,ae as ve,R as E,_ as z,aY as pe,aZ as _e}from"./vendor-b2024301.js";import{_ as ge}from"./index-fbf0707b.js";const c=l=>(pe("data-v-3eaa4b0b"),l=l(),_e(),l),fe=["src"],we=["src"],ye={key:1,class:"captcha_message"},me={class:"captcha_message__icon"},xe={key:0,height:"28",viewBox:"0 0 28 28",width:"28",xmlns:"http://www.w3.org/2000/svg"},be=c(()=>t("g",{fill:"none","fill-rule":"evenodd",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[t("path",{d:"M22.776 4.073A13.2 13.2 0 0 0 14 .75C6.682.75.75 6.682.75 14S6.682 27.25 14 27.25 27.25 21.318 27.25 14c0-.284-.009-.566-.027-.845"}),t("path",{d:"M7 12.5l7 7 13-13"})],-1)),ke=[be],Se={key:1,height:"28",viewBox:"0 0 28 28",width:"28",xmlns:"http://www.w3.org/2000/svg"},Ce=c(()=>t("g",{fill:"none","fill-rule":"evenodd",stroke:"#fff","stroke-width":"1.5"},[t("circle",{cx:"14",cy:"14",r:"13.25"}),t("path",{d:"M8.75 8.75l10.5 10.5M19.25 8.75l-10.5 10.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Re=[Ce],He={class:"captcha_message__text"},Be={key:2,class:"captcha_message loadding"},Le=c(()=>t("div",{class:"captcha_message__icon captcha_message__icon--loadding"},null,-1)),Me=c(()=>t("div",{class:"captcha_message__text"},"加载中...",-1)),Te=[Le,Me],Ie={key:3,class:"captcha_message"},Ve=c(()=>t("div",{class:"captcha_message__icon captcha_message__icon--loadding"},null,-1)),Ee=c(()=>t("div",{class:"captcha_message__text"},null,-1)),De=[Ve,Ee],We=c(()=>t("path",{d:"M500.864 545.728a47.744 47.744 0 0 0 6.72-48.896 24.704 24.704 0 0 0-4.48-8.384L240.256 193.088a34.24 34.24 0 0 0-28.608-17.408 34.24 34.24 0 0 0-25.856 12.864 46.592 46.592 0 0 0 0 59.52l238.08 264.512-238.08 264.512a46.592 46.592 0 0 0-1.088 59.52 32 32 0 0 0 50.56 0l265.6-290.88z","p-id":"820"},null,-1)),Ne=c(()=>t("path",{d:"M523.84 248.064l236.992 264.512-238.08 264.512a46.592 46.592 0 0 0 0 59.52 32 32 0 0 0 50.56 0l265.6-292.608a47.744 47.744 0 0 0 6.72-48.832 24.704 24.704 0 0 0-4.48-8.448L578.304 191.36a34.24 34.24 0 0 0-55.552-2.816 46.592 46.592 0 0 0 1.088 59.52z","p-id":"821"},null,-1)),Ye=[We,Ne],ze={key:0,class:"captcha__actions"},Fe=["fill"],qe=c(()=>t("path",{d:"M10,4 C12.0559549,4 13.9131832,5.04358655 15.0015086,6.68322231 L15,5.5 C15,5.22385763 15.2238576,5 15.5,5 C15.7761424,5 16,5.22385763 16,5.5 L16,8.5 C16,8.77614237 15.7761424,9 15.5,9 L12.5,9 C12.2238576,9 12,8.77614237 12,8.5 C12,8.22385763 12.2238576,8 12.5,8 L14.5842317,8.00000341 C13.7999308,6.20218044 12.0143541,5 10,5 C7.23857625,5 5,7.23857625 5,10 C5,12.7614237 7.23857625,15 10,15 C11.749756,15 13.3431487,14.0944653 14.2500463,12.6352662 C14.3958113,12.4007302 14.7041063,12.328767 14.9386423,12.4745321 C15.1731784,12.6202971 15.2451415,12.9285921 15.0993765,13.1631281 C14.0118542,14.9129524 12.0990688,16 10,16 C6.6862915,16 4,13.3137085 4,10 C4,6.6862915 6.6862915,4 10,4 Z","fill-rule":"nonzero"},null,-1)),Pe=[qe],Xe=le({__name:"SlideCaptcha",props:{width:{type:Number,default:340},height:{type:Number,default:212},barHeight:{type:Number,default:40},handlerIconWidth:{type:Number,default:16},handlerIconHeigth:{type:Number,default:16},background:{type:String,default:"#eee"},circle:{type:Boolean,default:!1},radius:{type:String,default:"4px"},text:{type:String,default:"按住滑块拖动"},progressBarBg:{type:String,default:"#76c61d"},successTip:{type:String,default:"验证通过，超过80%用户"},failTip:{type:String,default:"验证未通过，拖动滑块将悬浮图像正确合并"},showRefresh:{type:Boolean,default:!1},refreshColor:{type:String,default:"#505050"}},emits:["finish","refresh"],setup(l,{expose:F,emit:D}){const e=l,w=a(!1),_=a(!1),R=a(0),H=a(0),B=a(!1),q=a(!1),g=a(!1),L=a([]),M=a(void 0),T=a(!1),y=a(!1),m=a(!1),u=a(""),h=a(""),v=a(!1),P=i(()=>({width:e.width+"px",height:e.height+"px",position:"relative",overflow:"hidden"})),X=i(()=>({width:e.width+"px"})),G=i(()=>({width:e.width+"px",height:e.barHeight+"px",lineHeight:e.barHeight+"px",background:e.background,borderRadius:e.circle?e.barHeight/2+"px":e.radius})),Z=i(()=>({background:e.progressBarBg,height:e.barHeight+"px",borderRadius:e.circle?e.barHeight/2+"px 0 0 "+e.barHeight/2+"px":e.radius})),j=i(()=>({height:e.barHeight+"px",width:e.width+"px"})),K=i(()=>({width:e.barHeight+"px",height:e.barHeight-2+"px"})),O=i(()=>({width:e.handlerIconWidth+"px",height:e.handlerIconHeigth+"px"})),U=i(()=>e.refreshColor),A=i(()=>({color:e.refreshColor})),x=a(),b=a(),I=a(),p=a(),k=a();re(()=>{});const Q=()=>{w.value=!0,ue(()=>{W(),ae()}),m.value=!0},J=(s,r)=>{m.value=!1,u.value=s,h.value=r},$=()=>{y.value=!0},ee=s=>{s.value=s,y.value=!1,T.value=!0},W=()=>{R.value=0,H.value=0,L.value=[],_.value=!1,g.value=!1,m.value=!1,y.value=!1,T.value=!1,v.value=!1,b&&(b.value.style.width=0),p&&(p.value.style.left=0),k&&(k.value.style.left=0)},N=()=>{window.removeEventListener("touchmove",S),window.removeEventListener("touchend",C),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",C)},Y=s=>{!v.value&&u.value&&h.value&&!g.value&&(window.addEventListener("touchmove",S),window.addEventListener("touchend",C),window.addEventListener("mousemove",S),window.addEventListener("mouseup",C),_.value=!0,M.value=new Date,R.value=s.pageX||s.touches[0].pageX,H.value=s.pageY||s.touches[0].pageY)},S=s=>{if(_.value&&!v.value&&u.value&&h.value&&!g.value){const r=(s.pageX||s.touches[0].pageX)-R.value,V=(s.pageY||s.touches[0].pageY)-H.value;k.value.style.left=r+"px",b.value.style.width=r+e.barHeight/2+"px",p.value.style.left=r+"px",L.value.push({x:Math.round(r),y:Math.round(V),t:new Date().getTime()-M.value.getTime()})}},C=()=>{_.value&&!v.value&&u.value&&h.value&&!g.value&&(_.value=!1,g.value=!0,N(),D("finish",{backgroundImageWidth:I.value.offsetWidth,backgroundImageHeight:I.value.offsetHeight,sliderImageWidth:p.value.offsetWidth,sliderImageHeight:p.value.offsetHeight,startTime:M.value,endTime:new Date,tracks:L.value}))},te=s=>{w.value=s},ae=()=>{x.value.style.setProperty("--textColor","#333"),x.value.style.setProperty("--width",Math.floor(e.width/2)+"px"),x.value.style.setProperty("--pwidth",-Math.floor(e.width/2)+"px")},se=()=>{W(),D("refresh")};return F({startRequestVerify:$,endRequestVerify:ee,startRequestGenerate:Q,endRequestGenerate:J,setShowHiden:te}),ie(()=>{N()}),(s,r)=>{const V=ne("van-popup");return o(),ce(V,{show:w.value,"onUpdate:show":r[0]||(r[0]=oe=>w.value=oe),teleport:"body"},{default:de(()=>[t("div",{class:"captcha",style:d(X.value)},[t("div",{class:"captcha__main",style:d(P.value)},[u.value?(o(),n("img",{key:0,ref_key:"backgroundRef",ref:I,alt:"background",class:"captcha_background",src:u.value},null,8,fe)):f("",!0),he(t("img",{ref_key:"sliderRef",ref:p,alt:"slider",class:E(["captcha_slider",{goFirst:B.value,goKeep:q.value}]),src:h.value},null,10,we),[[ve,h.value]]),T.value?(o(),n("div",ye,[t("div",me,[v.value?(o(),n("svg",xe,ke)):(o(),n("svg",Se,Re))]),t("div",He,z(v.value?l.successTip:l.failTip),1)])):f("",!0),m.value?(o(),n("div",Be,Te)):f("",!0),y.value?(o(),n("div",Ie,De)):f("",!0)],4),t("div",{ref_key:"dragVerifyRef",ref:x,class:"captcha__bar",style:d(G.value)},[t("div",{ref_key:"progressBarRef",ref:b,class:E(["captcha_progress_bar",{goFirst2:B.value}]),style:d(Z.value)},null,6),t("div",{class:"captcha_progress_bar__text",style:d(j.value)},z(l.text),5),t("div",{ref_key:"handlerRef",ref:k,class:E(["captcha_handler",{goFirst:B.value}]),style:d(K.value),onMousedown:Y,onTouchstart:Y},[(o(),n("svg",{"p-id":"819",style:d(O.value),version:"1.1",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ye,4))],38)],4),l.showRefresh?(o(),n("div",ze,[t("a",{class:"captcha__action",style:d(A.value),onClick:se},[(o(),n("svg",{fill:U.value,height:"20px",version:"1.1",viewBox:"0 0 20 20",width:"20px",xmlns:"http://www.w3.org/2000/svg"},Pe,8,Fe))],4)])):f("",!0)],4)]),_:1},8,["show"])}}});const je=ge(Xe,[["__scopeId","data-v-3eaa4b0b"]]);export{je as S};

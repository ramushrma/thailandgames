import{L as De}from"./LangPopup-08a11cc6.js";import{O as W,y as le,t as g,x as j,v as U,C as Q,B as ue,b5 as X,a3 as ee,a0 as de,V as R,a4 as f,Y as a,T as i,_ as v,Z as F,Q as ce,a1 as $,ae as K,b8 as ve,a5 as te,b9 as me,k as m,F as ge,ac as J,aY as pe,aZ as _e,P as S,a6 as be,ba as fe,bb as he,R as D}from"./vendor-b2024301.js";import{S as we}from"./SlideCaptcha-7b0791d7.js";import{S as Fe,v as ae,T as ne,A as q,D as $e,U as ye,l as se,H as Se,g as ke,_ as re,I as Be,m as Ee,V as xe}from"./index-fbf0707b.js";import{P as Y}from"./PasswordInput-31e16272.js";import{P as Ve}from"./PhoneInput-cdb15012.js";import{V as Ae}from"./VerifyInput-776957e7.js";import{v as z,a as ie}from"./validate-0bf9ac20.js";import{C as Te}from"./useCode.hook-56068ce8.js";import{E as Me,V as Ne}from"./EmailInput-42416bc1.js";import"./index-4a5675bf.js";import"./DropDown-f1f7db31.js";const Oe=h=>(pe("data-v-327ab6b4"),h=h(),_e(),h),Ue=["onKeydown"],qe={class:"tip"},He={key:0,class:"red"},Ge={key:1,class:"red"},Le={class:"register__container-tip"},ze=Oe(()=>a("div",{class:"tipbg"},null,-1)),Ke={class:"register__container-tips"},Je={class:"register__container-invitation"},Ye={class:"register__container-invitation__label"},Ze={class:"register__container-invitation__label-icon"},Qe={class:"register__container-invitation__input"},We=["placeholder","disabled"],je={class:"register__container-remember"},Xe={class:"register__container-button"},et={class:"account"},tt={class:"loginin"},at=W({__name:"Register",props:{registerData:{}},setup(h,{expose:N}){const w=h,{t:e}=le(),p=Fe(),l=ae(),o=g(!1),t=g({number:"",numberType:l.rPwdForm.numberType,smsvcode:"",password:"",rePassword:"",invitecode:"",registerType:"mobile"}),T=g("register");t.value.number="",sessionStorage.getItem("register_a")&&(t.value=JSON.parse(sessionStorage.getItem("register_a")||""),sessionStorage.setItem("register_a",""));const y=j(),n=g(!1),b=g(!1),k=U(()=>{var s,r,_;return!!((s=y.currentRoute.value.query)!=null&&s.invitationCode||(_=(r=y.currentRoute.value.query)==null?void 0:r.r_code)!=null&&_.toString()||sessionStorage.getItem("invitecode"))}),P=U(()=>w.registerData.isInvitecode=="1"?e("plsEnterInvitationCode"):e("notNecessary")),B={}.VITE_SHOWREGISTERTIP||!1;Q(()=>t.value.number,s=>{l.setCountDown(0)},{flush:"post"}),Q(()=>l.rPwdForm.numberType,s=>{!t.value.numberType&&(t.value.numberType=s)},{flush:"post"});function x(){y.push({name:"login"})}const E=async()=>{if(!ne(t.value.numberType,t.value.number.trim().length))return l.setCountDown(0),m({message:e("wrongTel"),wordBreak:"break-word"});await q($e({phone:t.value.numberType.replace("+","")+t.value.number,codeType:Te.Registr}))?ge(e("sendSuccess")):setTimeout(()=>{l.setCountDown(0)},500)},V=U(()=>{var C;let s=e("regTip2").match(/\d+/);""+t.value.numberType;const r=(C=p.getAreaPhoneLenList.find(c=>(c==null?void 0:c.area)=="+"+t.value.numberType))==null?void 0:C.len;let _=9;return(r==null?void 0:r.indexOf("-"))!=-1?_=r==null?void 0:r.toString().split("-")[0]:_=r,s?s[0].substr(0,_):""}),Z=s=>{const r=s.target;r.value=r.value.replace(/[\s\n\t\r]/g,"")},I=async()=>{if(!ne(t.value.numberType,t.value.number.trim().length))return m({message:e("wrongTel"),wordBreak:"break-word"});if(t.value.number.charAt(0)==="0"&&t.value.numberType=="62")return m({message:e("registerNumberTip"),wordBreak:"break-word"});if(w.registerData.registerMobileState!=="1")return m({message:e("registerClose"),wordBreak:"break-word"});if(!t.value.number.trim()||n.value){n.value=!0;return}if(w.registerData.isOpenRegisterSMS!=="0")if(t.value.smsvcode.trim()){if(t.value.smsvcode.trim().length!=6)return m({message:e("verifyCode6Digits"),wordBreak:"break-word"})}else return m({message:e("registerTip1"),wordBreak:"break-word"});if(!t.value.password.trim())return m({message:e("registerTip2"),wordBreak:"break-word"});if(!z.passReg3.test(t.value.password)){o.value=!0;return}if(!t.value.rePassword.trim())return m({message:e("registerTip3"),wordBreak:"break-word"});if(t.value.rePassword!==t.value.password){b.value=!0;return}else b.value=!1;if(!l.userForm.termAndPolicy)return m({message:e("registerDesc1"),wordBreak:"break-word"});w.registerData.hasCaptcha==="1"?M():A("")},H=s=>{t.value.numberType=s},G=s=>{t.value.number=s},L=()=>{he("toPath","ResetPassword"),y.push({name:"About-AboutDetail"})},u=g(),d=g(""),A=async s=>{J(async()=>{u.value.startRequestVerify();const{number:r,numberType:_,smsvcode:C,password:c,invitecode:Ie}=t.value;let Ce={username:_.replace("+","")+r,smsvcode:C,registerType:t.value.registerType,pwd:c,invitecode:Ie,domainurl:window.location.hostname,phonetype:ye(),captchaId:d.value,track:s};l.register(Ce).then(async O=>{if(O){const Re=se(),{token:oe,tokenHeader:Pe}=O==null?void 0:O.data;Re.setToken(oe),localStorage.setItem("tokenHeader",Pe),localStorage.setItem("numberType",l.getUserForm.numberType),localStorage.setItem("number",l.userForm.number),y.replace("/"),await l.getUserInfo({signature:oe})}}).catch(O=>{}).finally(()=>{u.value.setShowHiden(!1)})})},M=async()=>{J(async()=>{u.value.startRequestGenerate();const s=await q(Se());s?(d.value=s.data.captchaId,u.value.endRequestGenerate(s.data.backgroundImage,s.data.sliderImage)):u.value.endRequestGenerate(null,null)})};return ue(()=>{var r,_;l.setCountDown(0);const s=((r=y.currentRoute.value.query.invitationCode)==null?void 0:r.toString())||((_=y.currentRoute.value.query.r_code)==null?void 0:_.toString())||sessionStorage.getItem("invitecode")||"";s&&(t.value.invitecode=s,sessionStorage.setItem("invitecode",s)),l.getIp()}),X((s,r)=>{s.name=="About-AboutDetail"?sessionStorage.setItem("register_a",JSON.stringify(t.value)):sessionStorage.setItem("register_a","")}),N({showPhoneValidate:n}),(s,r)=>{const _=ee("van-checkbox"),C=de("lazy");return S(),R("div",{class:"register__container",onKeydown:me(I,["enter"])},[f(Ve,{"show-validate":n.value,"onUpdate:showValidate":r[0]||(r[0]=c=>n.value=c),number:t.value.number,"onUpdate:number":r[1]||(r[1]=c=>t.value.number=c),"number-type":t.value.numberType,type:T.value,onChangeT:H,onChangeN:G,typeP:"register"},null,8,["show-validate","number","number-type","type"]),a("div",qe,[i(B)?(S(),R("span",He,v(i(e)("regTip1")),1)):F("",!0),i(B)?(S(),R("p",Ge,v(V.value),1)):F("",!0)]),s.registerData.isOpenRegisterSMS!=="0"?(S(),ce(Ae,{key:0,value:t.value.smsvcode,"onUpdate:value":r[2]||(r[2]=c=>t.value.smsvcode=c),sendFunc:E,number:t.value.number,numberType:t.value.numberType},null,8,["value","number","numberType"])):F("",!0),f(Y,{value:t.value.password,"onUpdate:value":r[3]||(r[3]=c=>t.value.password=c),label:i(e)("setPsw")},null,8,["value","label"]),$(a("div",Le,[ze,a("span",null,v(i(e)("pswRule")),1)],512),[[K,o.value]]),f(Y,{value:t.value.rePassword,"onUpdate:value":r[4]||(r[4]=c=>t.value.rePassword=c),label:i(e)("comfirmPsw")},null,8,["value","label"]),$(a("div",Ke,[a("span",null,v(i(e)("unmatchedInput")),1)],512),[[K,b.value]]),a("div",Je,[a("div",Ye,[$(a("img",Ze,null,512),[[C,i(ke)("login","invitation")]]),a("span",null,v(i(e)("invitationCode")),1)]),a("div",Qe,[$(a("input",{type:"text","auto-complete":"new-password",autocomplete:"off",name:"userNumber","onUpdate:modelValue":r[5]||(r[5]=c=>t.value.invitecode=c),placeholder:P.value,disabled:k.value,maxlength:"20",onInput:Z},null,40,We),[[ve,t.value.invitecode,void 0,{trim:!0}]])])]),a("div",je,[f(_,{modelValue:i(l).userForm.termAndPolicy,"onUpdate:modelValue":r[7]||(r[7]=c=>i(l).userForm.termAndPolicy=c),"checked-color":"#61A9FF"},{default:te(()=>[be(v(i(e)("readNagree"))+" ",1),a("span",{onClick:r[6]||(r[6]=fe(c=>L(),["stop"]))},v(i(e)("desPrivacy")),1)]),_:1},8,["modelValue"])]),a("div",Xe,[a("button",{onClick:I},v(i(e)("register")),1),a("button",{class:"login",onClick:x},[a("div",et,v(i(e)("iHaveAcount")),1),a("div",tt,v(i(e)("goLogin")),1)])]),f(we,{ref_key:"captchaRef",ref:u,"refresh-color":"#FFFFFF",text:i(e)("slideCaptchaText"),"show-refresh":!0,onFinish:A,onRefresh:M},null,8,["text"])],40,Ue)}}});const st=re(at,[["__scopeId","data-v-327ab6b4"]]),rt=h=>(pe("data-v-58c6181a"),h=h(),_e(),h),ot=["onKeydown"],nt={class:"register__container-tip"},it=rt(()=>a("div",{class:"tipbg"},null,-1)),lt={class:"register__container-tips"},ut={class:"register__container-invitation"},dt={class:"register__container-invitation__label"},ct={class:"register__container-invitation__label-icon"},vt={class:"register__container-invitation__input"},mt=["placeholder","disabled"],gt={class:"register__container-remember"},pt={class:"register__container-button"},_t={class:"account"},bt={class:"loginin"},ft=W({__name:"EmailRegister",props:{registerData:{}},setup(h,{expose:N}){const w=h,{t:e}=le(),p=g(!1),l=ae(),o=g({smsvcode:"",password:"",rePassword:"",invitecode:"",email:"",registerType:"email"}),t=g("register");sessionStorage.getItem("register")&&(o.value=JSON.parse(sessionStorage.getItem("register")||""),sessionStorage.setItem("register",""));const T=j(),y=g(!1),n=g(!1),b=U(()=>{var u;return!!((u=T.currentRoute.value.query)!=null&&u.invitationCode)}),k=U(()=>w.registerData.isInvitecode=="1"?e("plsEnterInvitationCode"):e("notNecessary"));Q(()=>o.value.email,u=>{l.setCountDown(0)},{flush:"post"});function P(){T.push({name:"login"})}const B=async()=>{if(!z.email1.test(o.value.email))return l.setCountEmailDown(0),m({message:e(ie.email),wordBreak:"break-word"});await q(Be({email:o.value.email,emailType:Te.Registr}))?ge(e("sendSuccess")):l.setCountEmailDown(0)},x=u=>{const d=u.target;d.value=d.value.replace(/[\s\n\t\r]/g,"")},E=async()=>{if(w.registerData.registerEmailState!=="1")return m({message:e("registerClose"),wordBreak:"break-word"});if(w.registerData.isOpenRegisterEmail!=="0")if(o.value.smsvcode.trim()){if(o.value.smsvcode.trim().length!=6)return m({message:e("verifyCode6Digits"),wordBreak:"break-word"})}else return m({message:e("registerTip6"),wordBreak:"break-word"});if(!z.email1.test(o.value.email))return m({message:e(ie.email),wordBreak:"break-word"});if(!o.value.password.trim())return m({message:e("registerTip2"),wordBreak:"break-word"});if(!z.passReg3.test(o.value.password)){p.value=!0;return}if(!o.value.rePassword.trim())return m({message:e("registerTip3"),wordBreak:"break-word"});if(o.value.rePassword!==o.value.password){n.value=!0;return}else n.value=!1;if(!l.userForm.termAndPolicy)return m({message:e("registerDesc1"),wordBreak:"break-word"});w.registerData.hasCaptcha==="1"?L():G("")},V=u=>{o.value.email=u},Z=()=>{he("toPath","ResetPassword"),T.push({name:"About-AboutDetail"})},I=g(),H=g(""),G=async u=>{J(async()=>{I.value.startRequestVerify();const{smsvcode:d,password:A,invitecode:M}=o.value;let s={username:o.value.email,smsvcode:d,registerType:o.value.registerType,pwd:A,invitecode:M,domainurl:window.location.hostname,phonetype:ye(),captchaId:H.value,track:u};l.register(s).then(async r=>{if(r){const _=se(),{token:C,tokenHeader:c}=r==null?void 0:r.data;_.setToken(C),localStorage.setItem("tokenHeader",c),localStorage.setItem("numberType",l.getUserForm.numberType),localStorage.setItem("number",l.userForm.number),T.replace("/"),await l.getUserInfo({signature:C})}}).catch(r=>{}).finally(()=>{I.value.setShowHiden(!1)})})},L=async()=>{J(async()=>{I.value.startRequestGenerate();const u=await q(Se());u?(H.value=u.data.captchaId,I.value.endRequestGenerate(u.data.backgroundImage,u.data.sliderImage)):I.value.endRequestGenerate(null,null)})};return ue(()=>{var d;l.setCountEmailDown(0);const u=((d=T.currentRoute.value.query.invitationCode)==null?void 0:d.toString())||"";u&&(o.value.invitecode=u)}),X((u,d)=>{u.name=="About-AboutDetail"?sessionStorage.setItem("register",JSON.stringify(o.value)):sessionStorage.setItem("register","")}),N({showPhoneValidate:y}),(u,d)=>{const A=ee("van-checkbox"),M=de("lazy");return S(),R("div",{class:"register__container",onKeydown:me(E,["enter"])},[f(Me,{ref:"email",type:t.value,email:o.value.email,onChangeN:V},null,8,["type","email"]),u.registerData.isOpenRegisterEmail!=="0"?(S(),ce(Ne,{key:0,value:o.value.smsvcode,"onUpdate:value":d[0]||(d[0]=s=>o.value.smsvcode=s),sendFunc:B,email:o.value.email},null,8,["value","email"])):F("",!0),f(Y,{value:o.value.password,"onUpdate:value":d[1]||(d[1]=s=>o.value.password=s),label:i(e)("setPsw")},null,8,["value","label"]),$(a("div",nt,[it,a("span",null,v(i(e)("pswRule")),1)],512),[[K,p.value]]),f(Y,{value:o.value.rePassword,"onUpdate:value":d[2]||(d[2]=s=>o.value.rePassword=s),label:i(e)("comfirmPsw")},null,8,["value","label"]),$(a("div",lt,[a("span",null,v(i(e)("unmatchedInput")),1)],512),[[K,n.value]]),a("div",ut,[a("div",dt,[$(a("img",ct,null,512),[[M,i(ke)("login","invitation")]]),a("span",null,v(i(e)("invitationCode")),1)]),a("div",vt,[$(a("input",{type:"text","auto-complete":"new-password",autocomplete:"off",name:"userNumber","onUpdate:modelValue":d[3]||(d[3]=s=>o.value.invitecode=s),placeholder:k.value,disabled:b.value,maxlength:"20",onInput:x},null,40,mt),[[ve,o.value.invitecode,void 0,{trim:!0}]])])]),a("div",gt,[f(A,{modelValue:i(l).userForm.termAndPolicy,"onUpdate:modelValue":d[5]||(d[5]=s=>i(l).userForm.termAndPolicy=s),"checked-color":"#4DD8EF"},{default:te(()=>[be(v(i(e)("readNagree"))+" ",1),a("span",{onClick:d[4]||(d[4]=fe(s=>Z(),["stop"]))},v(i(e)("desPrivacy")),1)]),_:1},8,["modelValue"])]),a("div",pt,[a("button",{onClick:E},v(i(e)("register")),1),a("button",{class:"login",onClick:P},[a("div",_t,v(i(e)("iHaveAcount")),1),a("div",bt,v(i(e)("goLogin")),1)])]),f(we,{ref_key:"captchaRef",ref:I,"refresh-color":"#FFFFFF",text:i(e)("slideCaptchaText"),"show-refresh":!0,onFinish:G,onRefresh:L},null,8,["text"])],40,ot)}}});const ht=re(ft,[["__scopeId","data-v-58c6181a"]]),wt={class:"resgister__C"},yt={class:"resgister__C-heading"},St={class:"resgister__C-heading__title"},kt={class:"resgister__C-heading__subTitle"},Tt={class:"login_container-tab"},It={class:"resgister__C-form"},Ct=W({__name:"index",setup(h){const{openAll:N}=Ee(),w=se();ae();const e=g({isRegisterState:"1",SMSstate:"0",registerStateMsg:"",hasCaptcha:"0",registerEmailState:"0",registerMobileState:"0",isOpenRegisterSMS:"0",isOpenRegisterEmail:"0",isInvitecode:"0"}),p=g("phone"),l=j();w.token&&l.push({name:"home"});const o=n=>{p.value=n};X((n,b,k)=>{k(),n.name==="home"&&N()});const t=g();function T(){l.push({name:"home"})}async function y(){var b,k,P,B,x,E,V;const n=await q(xe());n&&(e.value.isRegisterState=n.data.registerState,e.value.registerStateMsg=n.data.registerStateMsg,e.value.registerEmailState=n.data.registerEmailState,e.value.registerMobileState=(b=n.data)==null?void 0:b.registerMobileState,e.value.isOpenRegisterSMS=(k=n.data)==null?void 0:k.isOpenRegisterSMS,e.value.isOpenRegisterEmail=(P=n.data)==null?void 0:P.isOpenRegisterEmail,e.value.hasCaptcha=n.data.isOpenCaptcha,e.value.isInvitecode=(B=n.data)==null?void 0:B.isInvitecode,Number(n.data.registerEmailState)+Number((x=n.data)==null?void 0:x.registerMobileState)==0?(((E=n.data)==null?void 0:E.isOpenRegisterSMS)!=="1"&&(p.value="email"),m({message:"Registrado com Sucesso",wordBreak:"break-word"}),l.push({name:"login"})):(e.value.registerSMSState=n.data.registerSMSState,e.value.registerEmailState!=="0"&&((V=n.data)==null?void 0:V.registerMobileState)=="0"&&(p.value="email")))}return y(),(n,b)=>{const k=ee("NavBar");return S(),R("div",wt,[f(k,{onClickLeft:T,leftArrow:!0,headLogo:!0},{right:te(()=>[f(De)]),_:1}),a("div",yt,[a("h1",St,v(n.$t("register")),1),a("div",kt,[a("span",null,v(n.$t("registerbyphoneoremail")),1)])]),a("div",Tt,[e.value.registerMobileState!="0"?(S(),R("div",{key:0,class:D(["tab",[p.value=="phone"?"active":""]]),onClick:b[0]||(b[0]=P=>o("phone"))},[a("div",{class:D(["phonebg",[p.value=="phone"?"phoneactive":""]])},null,2),a("div",{class:D(["font30",[p.value=="phone"?"phonefont30active":""]])},v(n.$t("phoneregister")),3)],2)):F("",!0),e.value.registerEmailState!="0"?(S(),R("div",{key:1,class:D(["tab",[p.value=="email"?"active":""]]),onClick:b[1]||(b[1]=P=>o("email"))},[a("div",{class:D(["emialbg",[p.value=="email"?"emailactive":""]])},null,2),a("div",{class:D(["font30",[p.value=="email"?"emailfont30active":""]])},v(n.$t("emailregister")),3)],2)):F("",!0)]),a("div",It,[e.value.registerMobileState!="0"?(S(),R("div",{key:0,class:D(["tab-content",[p.value=="phone"?"activecontent":""]])},[f(st,{ref_key:"register",ref:t,registerData:e.value},null,8,["registerData"])],2)):F("",!0),e.value.registerEmailState!="0"?(S(),R("div",{key:1,class:D(["tab-content",[p.value=="email"?"activecontent":""]])},[f(ht,{ref_key:"register",ref:t,registerData:e.value},null,8,["registerData"])],2)):F("",!0)])])}}});const Ot=re(Ct,[["__scopeId","data-v-a4c8bf60"]]);export{Ot as default};
